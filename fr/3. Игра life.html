<h3><strong>Sc√©nario pour Gemini CLI: Jeu "Vie"</strong></h3>
<h4><strong>√âtape 1: Cr√©ation de l'instruction syst√®me <code>GEMINI.md</code></strong></h4>
<p>Cr√©ez le r√©pertoire <code>.gemini</code> dans le dossier de travail du projet. √Ä l'int√©rieur de <code>.gemini</code>, cr√©ez le fichier <code>GEMINI.md</code> et ins√©rez l'instruction syst√®me. Exemple d'instruction:</p>
<pre class="line-numbers"><code class="language-markdown">## üìò Instruction pour la g√©n√©ration de code Python

### 1. R√®gles g√©n√©rales

* Utilisez **Python 3.10+**.
* Respectez un **style de codage clair, lisible et univoque**.
* **Chaque fonction, m√©thode et classe** doit avoir:

  * Annotation de types (`type hints`)
  * Documentation compl√®te et correcte au format `docstring` (voir section 3)
  * Commentaires internes (`#`), si n√©cessaire

---

### 2. Commentaires

* Les commentaires doivent √™tre **pr√©cis** et d√©crire **ce que fait le code**, et non ¬´ce que nous faisons¬ª.
* **Interdit** d'utiliser des pronoms: `faisons`, `retournons`, `envoyons`, `passons`, etc.
* **Autoris√©s** uniquement les termes: `extraction`, `ex√©cution`, `appel`, `remplacement`, `v√©rification`, `envoi`, `La fonction ex√©cute`, `La fonction modifie la valeur`, etc.

#### ‚ùå Exemple de commentaire incorrect:

<pre>```python
# Obtenons la valeur du param√®tre
```

#### ‚úÖ Exemple de commentaire correct:

<pre>```python
# La fonction extrait la valeur du param√®tre
```

---

### 3. Docstring (format de documentation)

Chaque fonction/m√©thode/classe doit contenir un `docstring` au format suivant:

<pre>```python
def function(param: str, param1: Optional[str | dict | str] = None) -> dict | None:
    """
    Args:
        param (str): Description du param√®tre `param`.
        param1 (Optional[str | dict | str], optional): Description du param√®tre `param1`. Par d√©faut `None`.

    Returns:
        dict | None: Description de la valeur de retour. Renvoie un dictionnaire ou `None`.

    Raises:
        SomeError: Description de la situation dans laquelle l'exception `SomeError` est lev√©e.

    Example:
        >>> function('param', 'param1')
        {'param': 'param1'}
    """
```

* **Tous les param√®tres et valeurs de retour doivent √™tre d√©crits.**
* Les formulations doivent √™tre **concises, pr√©cises et univoques**.
* Il n'est pas permis d'omettre la description des param√®tres/valeurs de retour/exceptions.

---

### 4. Annotation de types

* **Toutes les variables, param√®tres et valeurs de retour** doivent √™tre annot√©s.
* Utilisez la syntaxe Python 3.10+: `list[int]`, `dict[str, Any]`, `str | None`, etc.
* Exemples d'annotations correctes:

#### ‚úÖ Types simples:

<pre>```python
name: str = "John"
count: int = 42
flag: bool = True
```

#### ‚úÖ Collections et types complexes:

<pre>```python
from typing import Any, Optional, Callable, TypeAlias

coordinates: tuple[float, float] = (55.75, 37.61)
metadata: dict[str, Any] = {"debug": True}
UserId: TypeAlias = int
```

#### ‚úÖ Fonctions et m√©thodes:

<pre>```python
def get_user_name(user_id: int) -> str:
    """Renvoie le nom d'utilisateur par son identifiant."""
    ...
```

#### ‚úÖ Fonctions asynchrones:

<pre>```python
async def fetch_users() -> AsyncIterator[dict[str, int | str]]:
    ...
```

#### ‚úÖ Types g√©n√©riques:

<pre>```python
from typing import TypeVar, Generic

T = TypeVar("T")

class Container(Generic[T]):
    def __init__(self, value: T) -> None:
        self.value = value

    def get(self) -> T:
        return self.value
```

---

### 5. Autres

* Utilisez `default_factory` dans `dataclass` pour les valeurs mutables (`list`, `dict`).
* Pour les valeurs `Optional`, sp√©cifiez `T | None` (Python 3.10+) ou `Optional[T]`.
* Pour les structures complexes, utilisez `TypeAlias`.

---

üìå **Conseil:** Le stockage de `GEMINI.md` dans `.gemini` est une pratique standard pour gemini-cli. Lors de la g√©n√©ration de code, incluez toujours l'annotation de types, le `docstring` et √©vitez les formulations subjectives dans les commentaires. L'objectif est une structure de code aussi pr√©cise, reproductible et formalis√©e que possible.

---

Pour plus de commodit√©, nous allons cr√©er un r√©pertoire `game`, o√π seront stock√©s les fichiers du projet, et un r√©pertoire `scenarios`, o√π seront stock√©s les sc√©narios pour Gemini CLI:

* `scenarios/life-create-code.md` ‚Äî instructions pour cr√©er le code du jeu "Vie"
* `scenarios/life-create-test.md` ‚Äî instructions pour cr√©er des tests
* `scenarios/life-create-doc.md` ‚Äî instructions pour cr√©er de la documentation

---

<h3><strong>life-create-code.md</strong></h3>
<pre class="line-numbers"><code class="language-markdown">Dans le r√©pertoire `game`, cr√©ez le fichier life.py. 
Impl√©mentez le "Jeu de la Vie" de Conway en Python, en utilisant une approche orient√©e objet.
Utilisez les biblioth√®ques: `numpy`, `pygame` (pour les graphiques).

Exigences:
1.  Cr√©ez la classe `Game`.
2.  Dans `__init__`, la classe doit accepter les dimensions de la grille (largeur, hauteur) et cr√©er un champ initial al√©atoire.
3.  Cr√©ez la m√©thode `step()`, qui met √† jour l'√©tat du jeu d'un pas:
    - Une cellule vivante avec &lt; 2 voisins vivants meurt (solitude).
    - Une cellule vivante avec 2 ou 3 voisins vivants survit.
    - Une cellule vivante avec &gt; 3 voisins vivants meurt (surpopulation).
    - Une cellule morte avec exactement 3 voisins vivants devient vivante (naissance).
4.  Cr√©ez la m√©thode `display()` ou red√©finissez `__str__` pour afficher le champ dans la console ('‚ñ†' pour une cellule vivante, ' ' pour une cellule morte).
5.  Utilisez `numpy` pour travailler efficacement avec la grille.
6.  Dans le bloc `if __name__ == '__main__':` ajoutez un exemple qui cr√©e le jeu et lance la simulation avec un petit d√©lai entre les √©tapes.
7. Pour la visualisation du jeu, utilisez `pygame` ou une autre biblioth√®que graphique.
</code></pre>
<hr>
<h3><strong>life-create-test.md</strong></h3>
<pre class="line-numbers"><code class="language-markdown">Dans le r√©pertoire `game`, cr√©ez le fichier test_life.py, en utilisant le contexte du fichier @life.py. Utilisez le framework pytest.

Le test doit v√©rifier l'√©volution d'un oscillateur simple "Blinker":

1. Importez la classe `Game` de `life`.
2. Cr√©ez une fonction de test, par exemple `test_blinker_oscillation`.
3. Cr√©ez une instance de `Game` avec une taille fixe (par exemple, 5x5).
4. D√©finissez manuellement l'√©tat initial du champ: une ligne horizontale de trois cellules vivantes au centre.
5. Appelez `game.step()`.
6. Avec `assert` et `numpy.array_equal`, v√©rifiez que le champ a chang√© en une ligne verticale de trois cellules.
7. Appelez `game.step()` une fois de plus.
8. V√©rifiez que le champ est revenu √† son √©tat horizontal initial.
</code></pre>
<hr>
<h3><strong>life-create-doc.md</strong></h3>
<pre class="line-numbers"><code class="language-markdown">Analysez les fichiers @life.py et @test_life.py dans le r√©pertoire `game` et, sur cette base, cr√©ez le fichier de documentation doc.md.

Structure de la documentation:
- **Titre:** # Projet "Jeu de la Vie"
- **Br√®ve description:** Impl√©mentation de l'automate cellulaire de Conway.
- **Structure des fichiers:** Br√®ve description de l'objectif des fichiers `life.py` et `test_life.py`.
- **Comment lancer la simulation:** Commande pour lancer le fichier principal (`python life.py`).
- **Comment lancer les tests:** Commandes pour installer les d√©pendances (`pip install pytest numpy`) et lancer les tests (`pytest`).
</code></pre>
<hr>
<h3><strong>√âtape 2: Cr√©ation du code du jeu "Vie"</strong></h3>
<p>Nous lan√ßons gemini-cli dans le terminal. Important! Assurez-vous d'√™tre dans le r√©pertoire o√π se trouve <code>.gemini/GEMINI.md</code>.</p>
<ol>
<li>Nous donnons l'autorisation de cr√©er le fichier.</li>
<li>Gemini CLI g√©n√©rera le fichier <code>life.py</code> dans le r√©pertoire <code>game</code>.</li>
<li>Nous cr√©ons un environnement virtuel venv, installons les d√©pendances et lan√ßons le jeu.</li>
</ol>
<hr>
<h3><strong>√âtape 3: Cr√©ation des tests</strong></h3>
<ol>
<li>Gemini CLI g√©n√®re le fichier <code>test_life.py</code> dans le r√©pertoire <code>game</code>.</li>
<li>Nous testons des sc√©narios simples, par exemple, l'oscillateur "Blinker".</li>
<li>Nous corrigeons les erreurs si n√©cessaire.</li>
</ol>
<hr>
<h3><strong>√âtape 4: Cr√©ation de la documentation</strong></h3>
<ol>
<li>Gemini CLI analyse <code>life.py</code> et <code>test_life.py</code>.</li>
<li>G√©n√®re le fichier <code>doc.md</code> avec la description du projet, les instructions pour lancer le jeu et les tests.</li>
</ol>
<p>Voil√†! Le projet est pr√™t.</p>
