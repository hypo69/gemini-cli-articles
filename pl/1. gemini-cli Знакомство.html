<h2>Gemini CLI: Wprowadzenie i pierwsze kroki.</h2>

<p><strong>Gemini CLI</strong> to narzÄ™dzie, ktÃ³re dziaÅ‚a bezpoÅ›rednio w Twoim terminalu, rozumie TwojÄ… bazÄ™ kodu i pomaga naprawiaÄ‡ bÅ‚Ä™dy za pomocÄ… zapytaÅ„ w jÄ™zyku naturalnym. Jest to odpowiedÅº Google na Claude Code od Anthropic.
MoÅ¼esz uÅ¼ywaÄ‡ Gemini 2.5 Pro (po osiÄ…gniÄ™ciu limitu narzÄ™dzie przeÅ‚Ä…czy siÄ™ na Gemini 2.5 Flash) i jego okna kontekstowego o pojemnoÅ›ci 1 miliona tokenÃ³w, aby wykonywaÄ‡ do 60 zapytaÅ„ na minutÄ™ i 1000 zapytaÅ„ dziennie, a wszystko to za darmo.</p>

<h3>Spis treÅ›ci</h3>
<ul>
<li>Zrozumienie i nawigacja po duÅ¼ych bazach kodu</li>
<li>Wykrywanie i naprawianie bÅ‚Ä™dÃ³w</li>
<li>Pisanie i testowanie kodu</li>
<li>NarzÄ™dzia Gemini CLI</li>
<li>Integracja Google CLI z MCP</li>
</ul>

<h3>Kluczowe moÅ¼liwoÅ›ci Gemini CLI:</h3>
<ul>
<li><strong>Edycja i refaktoryzacja:</strong> Automatycznie ulepsza i upraszcza TwÃ³j kod pod kierunkiem AI.</li>
<li><strong>Wykrywanie i naprawianie bÅ‚Ä™dÃ³w:</strong> Znajduje bÅ‚Ä™dy i proponuje poprawki.</li>
<li><strong>Zrozumienie kodu:</strong> Gemini CLI moÅ¼e podsumowaÄ‡ architekturÄ™, wyjaÅ›niÄ‡ role moduÅ‚Ã³w lub zbudowaÄ‡ mapy przepÅ‚ywu wykonania.</li>
<li><strong>Generowanie testÃ³w:</strong> Automatycznie tworzy zadania testowe dla <code>pytest</code>.</li>
<li><strong>Wsparcie dokumentacji:</strong> MoÅ¼esz tworzyÄ‡ ustrukturyzowane dokumenty Markdown, listy zmian (changelogi) i odpowiedzi na problemy GitHub bezpoÅ›rednio w terminalu.</li>
<li><strong>Wykonywanie poleceÅ„:</strong> Gemini CLI moÅ¼e wykonywaÄ‡ polecenia powÅ‚oki, takie jak <code>git</code>, <code>npm</code>, <code>pip</code> i inne, co pozwala zarzÄ…dzaÄ‡ projektami bez wychodzenia z CLI.</li>
</ul>

<hr>

<h3>Krok 1: Wymagania wstÄ™pne</h3>

<p>Na poczÄ…tek zainstaluj Node.js (wersja 18 lub wyÅ¼sza). MoÅ¼esz pobraÄ‡ instalator wedÅ‚ug wÅ‚asnego wyboru lub wykonaÄ‡ nastÄ™pujÄ…ce polecenia bash w swoim terminalu:</p>

<pre class="line-numbers"><code class="language-bash"># Pobieranie i instalacja nvm (Node Version Manager):
curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.40.3/install.sh | bash

# Inicjalizacja nvm w bieÅ¼Ä…cej sesji terminala
. "$HOME/.nvm/nvm.sh"

# Pobieranie i instalacja Node.js (np. wersji 22):
nvm install 22

# Sprawdzenie wersji Node.js:
node -v # Powinno wyÅ›wietliÄ‡ "v22.17.0" lub podobne

# Sprawdzenie wersji npm:
npm -v # Powinno wyÅ›wietliÄ‡ "10.9.2" lub podobne</code></pre>

<blockquote>
<p>âš ï¸ <strong>WaÅ¼ne dla uÅ¼ytkownikÃ³w Windows:</strong>
PowyÅ¼sze polecenie <code>nvm</code> jest przeznaczone dla <strong>Linux/macOS</strong> i <strong>nie bÄ™dzie dziaÅ‚aÄ‡ w PowerShell ani cmd.exe</strong>.
Dla Windows uÅ¼yj <a href="https://github.com/coreybutler/nvm-windows">nvm-windows</a>, pobierajÄ…c <code>nvm-setup.exe</code> z sekcji <a href="https://github.com/coreybutler/nvm-windows/releases">Releases</a>.
Alternatywnie moÅ¼esz zainstalowaÄ‡ WSL (Windows Subsystem for Linux) i wykonaÄ‡ polecenia w Ubuntu lub innej dystrybucji Linuksa.</p>
</blockquote>

<hr>
<h3>Krok 2: Konfiguracja Gemini CLI</h3>

<h4>Krok 2.1: Instalacja Gemini CLI</h4>
<p>Gdy Node.js i npm sÄ… zainstalowane i sprawdzone, zainstaluj Gemini CLI, wykonujÄ…c nastÄ™pujÄ…ce polecenie w swoim terminalu:</p>
<pre class="line-numbers"><code class="language-bash">npx https://github.com/google-gemini/gemini-cli</code></pre>
<p>Lub uÅ¼yj <code>npm</code> do globalnej instalacji:</p>
<pre class="line-numbers"><code class="language-bash">npm install -g @google/gemini-cli
gemini</code></pre>
<p>Po instalacji wpisz <code>gemini</code> w terminalu, aby uzyskaÄ‡ dostÄ™p do narzÄ™dzia.</p>

<h4>Krok 2.2: Uwierzytelnianie</h4>
<p>MoÅ¼esz uÅ¼yÄ‡ swojego osobistego konta Google do uwierzytelnienia. Zapewni to do 60 zapytaÅ„ na minutÄ™ i 1000 zapytaÅ„ dziennie podczas korzystania z Gemini.</p>
<p><img src="assets/gemini_cli_1/auth.png" alt="First Run"></p>

<p>W tym przewodniku uÅ¼yÅ‚em <strong>Logowania przez Google</strong>, ale moÅ¼esz rÃ³wnieÅ¼ uÅ¼yÄ‡ <strong>klucza API</strong> (ustawionego jako zmienna Å›rodowiskowa lub w pliku <code>.env</code>) lub uwierzytelniania przez <strong>Vertex AI</strong>.</p>

<p>Aby wygenerowaÄ‡ nowy klucz API, zaloguj siÄ™ do <strong>AI Studio</strong> za pomocÄ… swojego konta Google i kliknij "UtwÃ³rz klucz API".</p>
<pre class="line-numbers"><code class="language-bash"># Ustawienie klucza jako zmiennej Å›rodowiskowej
export GEMINI_API_KEY="TwÃ³j_Klucz_API"

# Lub utwÃ³rz plik .env
GEMINI_API_KEY="TwÃ³j_Klucz_API"</code></pre>
<p>MoÅ¼esz uÅ¼yÄ‡ polecenia <code>/auth</code> w polu tekstowym, aby w razie potrzeby przeÅ‚Ä…czyÄ‡ metodÄ™ uwierzytelniania.</p>

<hr>

<h3>Krok 3: Konfiguracja projektu w Gemini CLI</h3>
<p><img src="assets/gemini_cli_1/start.png" alt="Start"></p>
<p>Gdy CLI jest uruchomione, moÅ¼emy rozpoczÄ…Ä‡ interakcjÄ™ z Gemini z terminala. IstniejÄ… dwa sposoby pracy z projektem.</p>

<h4>1. RozpoczÄ™cie nowego projektu</h4>
<p>Aby rozpoczÄ…Ä‡ projekt od zera, wykonaj nastÄ™pujÄ…ce polecenia:</p>
<pre class="line-numbers"><code class="language-bash">cd new-project/
gemini</code></pre>
<p>WewnÄ…trz CLI uÅ¼yj promptu, aby rozwiÄ…zaÄ‡ interesujÄ…cy CiÄ™ problem, na przykÅ‚ad:</p>
<blockquote>
<p>Napisz kod enkodera dla transformera od podstaw.</p>
</blockquote>
<p><img src="assets/gemini_cli_1/example_1.png" alt="Example 1"></p>
<p>Udziel pozwolenia na zapis plikÃ³w:</p>
<p><img src="assets/gemini_cli/file.png" alt="File"></p>

<h4>2. Praca z istniejÄ…cym projektem</h4>
<p>JeÅ›li masz juÅ¼ bazÄ™ kodu, moÅ¼esz z niÄ… pracowaÄ‡, wykonujÄ…c nastÄ™pujÄ…ce polecenia:</p>
<pre class="line-numbers"><code class="language-bash">git clone https://github.com/AashiDutt/Google-Agent-Development-Kit-Demo
cd Google-Agent-Development-Kit-Demo
gemini</code></pre>
<p>WewnÄ…trz CLI uÅ¼yj promptu, na przykÅ‚ad:</p>
<blockquote>
<p>Przedstaw mi podsumowanie wszystkich zmian wprowadzonych w bazie kodu w ciÄ…gu ostatniego miesiÄ…ca.</p>
</blockquote>

<hr>

<h3>Krok 4: Eksperymenty z Gemini CLI</h3>
<p>Jako przykÅ‚ad uÅ¼yjÄ™ projektu <strong><a href="https://github.com/AashiDutt/Google-Agent-Development-Kit-Demo">Planer podrÃ³Å¼y ğŸŒğŸ›« oparty na ADK</a></strong>.
Za pomocÄ… Gemini CLI pokaÅ¼Ä™, jak:</p>
<ul>
<li>badaÄ‡ bazÄ™ kodu</li>
<li>wykryÄ‡ bÅ‚Ä…d lub problem na GitHubie lub w pliku</li>
<li>przeprowadziÄ‡ refaktoryzacjÄ™ kodu i wygenerowaÄ‡ testy jednostkowe</li>
<li>utworzyÄ‡ raport Markdown o wprowadzonych zmianach</li>
<li>wizualizowaÄ‡ bazÄ™ kodu, generujÄ…c schemat blokowy</li>
</ul>

<h4>Badanie i zrozumienie bazy kodu</h4>
<p>Zacznijmy od poproszenia Gemini o zbadanie i wyjaÅ›nienie bazy kodu.</p>

<p><strong>Prompt:</strong> <code>Zbadaj bieÅ¼Ä…cy katalog i opisz architekturÄ™ projektu.</code></p>

<p>Gemini CLI zwrÃ³ci ustrukturyzowane podsumowanie wyjaÅ›niajÄ…ce architekturÄ™:</p>
<ul>
<li><strong>Interfejs uÅ¼ytkownika:</strong> Aplikacja Streamlit (<code>travel_ui.py</code>) zapewnia interfejs do interakcji.</li>
<li><strong>Orkiestracja:</strong> <code>host_agent</code> dziaÅ‚a jako centralny koordynator.</li>
<li><strong>Wyspecjalizowani agenci:</strong> <code>flight_agent</code>, <code>stay_agent</code>, <code>activities_agent</code> do wyszukiwania lotÃ³w, hoteli i rozrywek.</li>
<li><strong>Komunikacja:</strong> Agenci komunikujÄ… siÄ™ ze sobÄ… za poÅ›rednictwem RESTful API w FastAPI.</li>
<li><strong>WspÃ³lne komponenty:</strong> <code>shared/schemas.py</code> definiuje wspÃ³lne struktury danych.</li>
</ul>

<p>PomoÅ¼e to zorientowaÄ‡ siÄ™ bez rÄ™cznego czytania kaÅ¼dego pliku.</p>

<h4>Analiza i naprawa problemu na GitHubie</h4>
<p>Zbadajmy niektÃ³re otwarte problemy z repozytorium GitHub.</p>

<p><strong>Prompt:</strong> <code>Oto problem na GitHubie: [@search https://github.com/AashiDutt/Google-Agent-Development-Kit-Demo/issues/1]. Przeanalizuj bazÄ™ kodu i zaproponuj 3-etapowy plan naprawy. Jakie pliki/funkcje naleÅ¼y zmieniÄ‡?</code></p>

<p>Gemini CLI zbadaÅ‚ problem:</p>
<ul>
<li>UÅ¼ywajÄ…c funkcji <code>@search</code>, pobraÅ‚ dane z GitHuba.</li>
<li>ZidentyfikowaÅ‚ gÅ‚Ã³wnÄ… przyczynÄ™ jako bÅ‚Ä…d serializacji JSON (w tym przypadku asynchroniczna funkcja <code>create_session()</code> nie zostaÅ‚a wywoÅ‚ana z <code>await</code>).</li>
<li>ZaproponowaÅ‚ zmiany i obsÅ‚ugÄ™ odpowiedzi w kilku plikach.</li>
</ul>

<p>NastÄ™pnie CLI oczekuje na dane wejÅ›ciowe od uÅ¼ytkownika w celu oceny zmian. JeÅ›li uÅ¼ytkownik siÄ™ zgodzi, wprowadzi proponowane zmiany.</p>

<h4>WdroÅ¼enie i testowanie poprawki</h4>
<p>Teraz wdroÅ¼ymy i przetestujemy poprawki zaproponowane przez Gemini.</p>

<p><strong>Prompt:</strong> <code>Napisz test jednostkowy dla tej zmiany w pytest w pliku test_shared.py.</code></p>

<p>Gemini CLI:</p>
<ul>
<li>WstawiÅ‚ <code>json.dumps()</code> przed wysÅ‚aniem Å‚adunku zadania.</li>
<li>UtworzyÅ‚ <code>test_agents.py</code> w celu dodania testÃ³w jednostkowych.</li>
<li>DodaÅ‚ nowy przypadek testowy do sprawdzania schematu i przekazywania zagnieÅ¼dÅ¼onych wiadomoÅ›ci agentÃ³w.</li>
</ul>

<h4>Generowanie dokumentacji</h4>
<p>Teraz, gdy poprawki zostaÅ‚y wprowadzone, podsumujmy zmiany i zapiszmy je w Markdown w pliku <code>.txt</code>.</p>

<p><strong>Prompt:</strong> <code>Napisz podsumowanie Markdown dotyczÄ…ce bÅ‚Ä™du, poprawki i pokrycia testowego. Sformatuj to jako wpis w dzienniku zmian pod wersjÄ… "v0.2.0".</code></p>

<p>NastÄ™pnie, aby zapisaÄ‡ podsumowanie w dokumencie, ja uÅ¼yÅ‚em nastÄ™pujÄ…cego promptu:</p>

<p><strong>Prompt:</strong> <code>Zapisz to podsumowanie w pliku .txt i nazwij go summary.txt</code></p>

<p>Gemini CLI uÅ¼ywa narzÄ™dzia <code>WriteFile</code> do zapisania pliku <code>summary.txt</code> w katalogu projektu.</p>

<h4>Generowanie schematu blokowego za pomocÄ… MCP</h4>
<p>Ta sekcja rozszerza poprzednie eksperymenty, w ktÃ³rych badam, jak Gemini CLI uÅ¼ywa <strong>Model Context Protocol (MCP)</strong> do utrzymywania podsumowaÅ„ na poziomie plikÃ³w i historii zadaÅ„ miÄ™dzy promptami. Daje to Gemini "pamiÄ™Ä‡ roboczÄ…" w ramach sesji.</p>

<p><strong>Prompt:</strong> <code>Wygeneruj schemat blokowy, ktÃ³ry pokazuje, jak agenci komunikujÄ… siÄ™ za poÅ›rednictwem A2A (agent-to-agent) i jak main.py zarzÄ…dza systemem. PodkreÅ›l, gdzie wystÄ…piÅ‚ problem i jak zostaÅ‚ naprawiony.</code></p>

<p>Ta wizualizacja staÅ‚a siÄ™ moÅ¼liwa dziÄ™ki staÅ‚ej pamiÄ™ci Gemini, ktÃ³ra zachowaÅ‚a peÅ‚ny kontekst naszej poprzedniej poprawki bÅ‚Ä™du i struktury agenta bez koniecznoÅ›ci ponownego Å‚adowania plikÃ³w.</p>

<h3>DostÄ™pne narzÄ™dzia Gemini CLI</h3>
<p>WywoÅ‚anie polecenia <code>/tools</code> w Gemini CLI pokaÅ¼e listÄ™ dostÄ™pnych narzÄ™dzi, ktÃ³re moÅ¼na wykorzystaÄ‡ do wykonywania rÃ³Å¼nych zadaÅ„, takich jak edycja kodu, generowanie testÃ³w, tworzenie dokumentacji i wiele innych.</p>
<p><img src="assets/gemini_cli_1/tools.png" alt="Tools"></p>

<p><strong>ReadFolder (ls)</strong>
WyÅ›wietla pliki i foldery w katalogu â€” analogicznie do polecenia <code>ls</code> w wierszu poleceÅ„.</p>

<p><strong>ReadFile (read-file)</strong>
Odczytuje peÅ‚nÄ… zawartoÅ›Ä‡ jednego pliku, co jest przydatne do tworzenia podsumowaÅ„ lub analizy.</p>

<p><strong>ReadManyFiles (read-many-files)</strong>
Odczytuje wiele plikÃ³w jednoczeÅ›nie, zazwyczaj wedÅ‚ug wzorca (np. wszystkie pliki <code>.js</code>).</p>

<p><strong>FindFiles (glob)</strong>
Wyszukuje pliki wedÅ‚ug wzorca (np. znajdÅº wszystkie pliki <code>config.json</code> w swoim projekcie).</p>

<p><strong>SearchText (grep)</strong>
Wyszukuje tekst w plikach, np. w celu znalezienia wszystkich komentarzy <code>TODO</code>.</p>

<p><strong>Edit (edit)</strong>
Stosuje zmiany w kodzie za pomocÄ… <code>diff</code>. Gemini pokazuje podglÄ…d poprawek i prosi o potwierdzenie przed ich zastosowaniem.</p>

<p><strong>WriteFile (write-file)</strong>
Tworzy nowe pliki (np. <code>README.md</code>) z treÅ›ciÄ… dostarczonÄ… przez uÅ¼ytkownika.</p>

<p><strong>Shell (shell)</strong>
Wykonuje polecenia bezpoÅ›rednio w terminalu, jeÅ›li dodasz przed nimi prefiks <code>!</code> (np. <code>!npm test</code>).</p>

<p><strong>WebFetch (web-fetch)</strong>
Pobiera zawartoÅ›Ä‡ z sieci (HTML lub JSON), umoÅ¼liwiajÄ…c Gemini analizowanie danych zewnÄ™trznych.</p>

<p><strong>GoogleSearch (web-search)</strong>
Pobiera zawartoÅ›Ä‡ z sieci (HTML lub JSON), umoÅ¼liwiajÄ…c Gemini analizowanie danych zewnÄ™trznych.</p>

<p><strong>Save Memory (memoryTool)</strong>
Zapisuje fakty lub preferencje podczas sesji (np. â€wolÄ™ async/awaitâ€), aby poprawiÄ‡ spÃ³jnoÅ›Ä‡ i zgodnoÅ›Ä‡ odpowiedzi.</p>

<h3>Rozszerzone moÅ¼liwoÅ›ci</h3>

<p>MoÅ¼esz dodawaÄ‡ specjalne instrukcje dla AI dla konkretnego projektu, tworzÄ…c plik <code>GEMINI.md</code> w katalogu gÅ‚Ã³wnym swojego projektu. WewnÄ…trz tego pliku moÅ¼esz definiowaÄ‡ reguÅ‚y projektu, style kodu i narzÄ™dzia, ktÃ³rych powinien uÅ¼ywaÄ‡ agent. Gwarantuje to, Å¼e wygenerowany kod jest zgodny ze standardami Twojego projektu.</p>

<p><a href="https://github.com/hypo69/hypotez/blob/master/src/endpoints/hypo69/code_assistant/instructions/CODE_RULES.EN.MD">PrzykÅ‚ad instrukcji systemowej</a></p>

<h3>Integracja Google CLI z MCP</h3>

<p>Dla wiÄ™kszoÅ›ci codziennych zadaÅ„ wystarczÄ… wbudowane narzÄ™dzia. Ale co, jeÅ›li chcesz, aby Gemini CLI robiÅ‚ coÅ› wysoce wyspecjalizowanego, na przykÅ‚ad wchodziÅ‚ w interakcje z okreÅ›lonymi API lub uÅ¼ywaÅ‚ wyspecjalizowanego modelu (powiedzmy, generatora obrazÃ³w lub narzÄ™dzia do analizy bezpieczeÅ„stwa)? WÅ‚aÅ›nie tutaj z pomocÄ… przychodzi MCP (protokÃ³Å‚ kontekstu modelu).</p>

<p>Zasadniczo MCP to otwarty standard, ktÃ³ry pozwala programistom dodawaÄ‡ nowe narzÄ™dzia i moÅ¼liwoÅ›ci do AI poprzez uruchomienie serwera, z ktÃ³rym CLI moÅ¼e wchodziÄ‡ w interakcje. W Gemini CLI moÅ¼esz skonfigurowaÄ‡ â€serwery MCPâ€ w pliku ustawieÅ„ JSON, a CLI bÄ™dzie traktowaÄ‡ je jako dodatkowe narzÄ™dzia, ktÃ³rych moÅ¼e uÅ¼ywaÄ‡.</p>

<h4>Jak skonfigurowaÄ‡ serwer MCP w Google CLI</h4>

<p>Jako przykÅ‚ad pokaÅ¼Ä™ Ci, jak skonfigurowaÄ‡ serwer MCP dla GitHuba w Gemini CLI.</p>

<p>WewnÄ…trz folderu swojego projektu utwÃ³rz folder za pomocÄ… polecenia:</p>

<pre class="line-numbers"><code class="language-bash">mkdir -p .gemini && touch .gemini/settings.json</code></pre>

<p>Zapisz ten kod w pliku:</p>
<pre class="line-numbers"><code class="language-json">{  
  "mcpServers": {  
    "github": {  
      "command": "npx",  
      "args": ["-y", "@modelcontextprotocol/server-github"],  
      "env": { "GITHUB_PERSONAL_ACCESS_TOKEN": "[TWÃ“J-TOKEN]" }  
    }  
  }  
}</code></pre>
<p><a href="https://docs.github.com/en/authentication/keeping-your-account-and-data-secure/managing-your-personal-access-tokens#creating-a-personal-access-token-classic">instrukcja jak uzyskaÄ‡ token</a></p>

<p>NastÄ™pnie wpisz <code>/quit</code> w Gemini CLI, aby wyjÅ›Ä‡, a nastÄ™pnie otwÃ³rz go ponownie.</p>

<p>Zobaczysz, Å¼e serwer MCP GitHub jest uruchomiony i gotowy do uÅ¼ycia.</p>
<p><img src="assets/gemini_cli_1/mcp.png" alt="MCP"></p>

<p>Wpisz polecenie <code>/mcp</code>, a zobaczysz listÄ™ narzÄ™dzi GitHub.</p>
<p><img src="assets/gemini_cli_1/mcp_commands.png" alt="Mcp Commands"></p>