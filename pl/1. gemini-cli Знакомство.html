<h2>Gemini CLI: Wprowadzenie i pierwsze kroki.</h2>
<p><strong>Gemini CLI</strong> to narzÄ™dzie, ktÃ³re dziaÅ‚a bezpoÅ›rednio w Twoim terminalu, rozumie TwojÄ… bazÄ™ kodu i pomaga naprawiaÄ‡ bÅ‚Ä™dy za pomocÄ… zapytaÅ„ w jÄ™zyku naturalnym. To odpowiedÅº Google na Claude Code firmy Anthropic.
MoÅ¼esz uÅ¼ywaÄ‡ Gemini 2.5 Pro (narzÄ™dzie przeÅ‚Ä…czy siÄ™ na Gemini 2.5 Flash po osiÄ…gniÄ™ciu limitu) i jego okna kontekstowego o pojemnoÅ›ci 1 miliona tokenÃ³w, aby wykonywaÄ‡ do 60 zapytaÅ„ na minutÄ™ i 1000 zapytaÅ„ dziennie, a wszystko to za darmo.</p>
<h3>Spis treÅ›ci</h3>
<ul>
<li>Zrozumienie i nawigacja po duÅ¼ych bazach kodu</li>
<li>Wykrywanie i naprawianie bÅ‚Ä™dÃ³w</li>
<li>Pisanie i testowanie kodu</li>
<li>NarzÄ™dzia Gemini CLI</li>
<li>Integracja Google CLI z MCP</li>
</ul>
<h3>Kluczowe funkcje Gemini CLI:</h3>
<ul>
<li><strong>Edycja i refaktoryzacja:</strong> Automatycznie poprawia i upraszcza TwÃ³j kod pod kierunkiem AI.</li>
<li><strong>Wykrywanie i naprawianie bÅ‚Ä™dÃ³w:</strong> Znajduje bÅ‚Ä™dy i sugeruje poprawki.</li>
<li><strong>Zrozumienie kodu:</strong> Gemini CLI moÅ¼e podsumowaÄ‡ architekturÄ™, wyjaÅ›niÄ‡ role moduÅ‚Ã³w lub zbudowaÄ‡ mapy przepÅ‚ywu wykonania.</li>
<li><strong>Generowanie testÃ³w:</strong> Automatycznie tworzy przypadki testowe dla `pytest`</li>
<li><strong>Wsparcie dokumentacji:</strong> MoÅ¼esz tworzyÄ‡ ustrukturyzowane dokumenty Markdown, dzienniki zmian (changelogi) i odpowiadaÄ‡ na problemy GitHub bezpoÅ›rednio w terminalu.</li>
<li><strong>Wykonywanie poleceÅ„:</strong> Gemini CLI moÅ¼e wykonywaÄ‡ polecenia powÅ‚oki, takie jak `git`, `npm`, `pip` i inne, co pozwala zarzÄ…dzaÄ‡ projektami bez wychodzenia z CLI.</li>
</ul>
<hr>
<h3>Krok 1: Wymagania wstÄ™pne</h3>
<p>Aby rozpoczÄ…Ä‡, zainstaluj Node.js (wersja 18 lub nowsza). MoÅ¼esz pobraÄ‡ instalator wedÅ‚ug wÅ‚asnego wyboru lub uruchomiÄ‡ nastÄ™pujÄ…ce polecenia bash w swoim terminalu:</p>
<pre class="line-numbers"><code class="language-bash"># Pobieranie i instalacja nvm (Node Version Manager):
curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.40.3/install.sh | bash

# Inicjalizacja nvm w bieÅ¼Ä…cej sesji terminala
. "$HOME/.nvm/nvm.sh"

# Pobieranie i instalacja Node.js (np. wersja 22):
nvm install 22

# Sprawdzenie wersji Node.js:
node -v # Powinno wyÅ›wietliÄ‡ "v22.17.0" lub podobne

# Sprawdzenie wersji npm:
npm -v # Powinno wyÅ›wietliÄ‡ "10.9.2" lub podobne
</code></pre>
<blockquote>
<p>âš ï¸ <strong>WaÅ¼ne dla uÅ¼ytkownikÃ³w Windows:</strong>
PowyÅ¼sze polecenie <code>nvm</code> jest przeznaczone dla <strong>Linux/macOS</strong> i <strong>nie bÄ™dzie dziaÅ‚aÄ‡ w PowerShell ani cmd.exe</strong>.
Dla systemu Windows uÅ¼yj [nvm-windows](https://github.com/coreybutler/nvm-windows), pobierajÄ…c <code>nvm-setup.exe</code> z sekcji [Releases](https://github.com/coreybutler/nvm-windows/releases).
Alternatywnie moÅ¼esz zainstalowaÄ‡ WSL (Windows Subsystem for Linux) i uruchomiÄ‡ polecenia w Ubuntu lub innej dystrybucji Linuksa.</p>
</blockquote>
<hr>
<h3>Krok 2: Konfiguracja Gemini CLI</h3>
<h4>Krok 2.1: Instalacja Gemini CLI</h4>
<p>Po zainstalowaniu i zweryfikowaniu Node.js i npm, zainstaluj Gemini CLI, uruchamiajÄ…c nastÄ™pujÄ…ce polecenie w swoim terminalu:</p>
<pre class="line-numbers"><code class="language-bash">npx https://github.com/google-gemini/gemini-cli
</code></pre>
<p>Lub uÅ¼yj <code>npm</code> do globalnej instalacji:</p>
<pre class="line-numbers"><code class="language-bash">npm install -g @google/gemini-cli
gemini
</code></pre>
<p>Po instalacji wpisz <code>gemini</code> w terminalu, aby uzyskaÄ‡ dostÄ™p do narzÄ™dzia.</p>
<h4>Krok 2.2: Uwierzytelnianie</h4>
<p>MoÅ¼esz uÅ¼yÄ‡ swojego osobistego konta Google do uwierzytelniania. Zapewni to do 60 zapytaÅ„ na minutÄ™ i 1000 zapytaÅ„ dziennie podczas korzystania z Gemini.
<p><img src="assets/gemini_cli_1/auth.png" alt="First Run"></p>
<p>W tym przewodniku uÅ¼yÅ‚em <strong>Zaloguj siÄ™ przez Google</strong>, ale moÅ¼esz rÃ³wnieÅ¼ uÅ¼yÄ‡ <strong>klucza API</strong> (ustawionego jako zmienna Å›rodowiskowa lub w pliku `.env`) lub uwierzytelniania <strong>Vertex AI</strong>.

Aby wygenerowaÄ‡ nowy klucz API, zaloguj siÄ™ do <strong>AI Studio</strong> za pomocÄ… swojego konta Google i kliknij "UtwÃ³rz klucz API".
```bash
# Ustaw klucz jako zmiennÄ… Å›rodowiskowÄ…
export GEMINI_API_KEY="Your_API_Key"

# Lub utwÃ³rz plik .env
GEMINI_API_KEY="Your_API_Key"
```
MoÅ¼esz uÅ¼yÄ‡ polecenia <code>/auth</code> w polu tekstowym, aby w razie potrzeby przeÅ‚Ä…czyÄ‡ metody uwierzytelniania.

---

<h3>Krok 3: Konfiguracja projektu w Gemini CLI</h3>
<p><img src="assets/gemini_cli_1/start.png" alt="Start"></p>
<p>Po uruchomieniu CLI moÅ¼emy rozpoczÄ…Ä‡ interakcjÄ™ z Gemini z terminala. IstniejÄ… dwa sposoby pracy z projektem.</p>
<h4>1. Rozpocznij nowy projekt</h4>
<p>Aby rozpoczÄ…Ä‡ projekt od zera, uruchom nastÄ™pujÄ…ce polecenia:
<pre class="line-numbers"><code class="language-bash">cd new-project/
gemini
</code></pre>
<p>WewnÄ…trz CLI uÅ¼yj monitu, aby rozwiÄ…zaÄ‡ interesujÄ…cy CiÄ™ problem, na przykÅ‚ad:
> Napisz kod kodera dla transformatora od podstaw.
![Example 1](assets/gemini_cli_1/example_1.png)
Udziel pozwolenia na zapisywanie plikÃ³w:
![File](assets/gemini_cli/file.png)

<h4>2. Pracuj z istniejÄ…cym projektem</h4>
<p>JeÅ›li masz juÅ¼ bazÄ™ kodu, moÅ¼esz z niÄ… pracowaÄ‡, uruchamiajÄ…c nastÄ™pujÄ…ce polecenia:
<pre class="line-numbers"><code class="language-bash">git clone https://github.com/AashiDutt/Google-Agent-Development-Kit-Demo
cd Google-Agent-Development-Kit-Demo
gemini
</code></pre>
<p>WewnÄ…trz CLI uÅ¼yj monitu, na przykÅ‚ad:
> Podaj mi podsumowanie wszystkich zmian wprowadzonych w bazie kodu w ciÄ…gu ostatniego miesiÄ…ca.

---

<h3>Krok 4: Eksperymentowanie z Gemini CLI</h3>
<p>Jako przykÅ‚ad uÅ¼yjÄ™ projektu <strong>[Planer podrÃ³Å¼y oparty na ADK ğŸŒğŸ›«](https://github.com/AashiDutt/Google-Agent-Development-Kit-Demo)**.
Z Gemini CLI pokaÅ¼Ä™, jak:
<ol>
<li>przeglÄ…daÄ‡ bazÄ™ kodu</li>
<li>wykrywaÄ‡ bÅ‚Ä™dy lub problemy na GitHubie lub w pliku</li>
<li>refaktoryzowaÄ‡ kod i generowaÄ‡ testy jednostkowe</li>
<li>tworzyÄ‡ raport Markdown z wprowadzonych zmian</li>
<li>wizualizowaÄ‡ bazÄ™ kodu, generujÄ…c schemat blokowy</li>
</ol>
<h4>PrzeglÄ…danie i zrozumienie bazy kodu</h4>
<p>Zacznijmy od poproszenia Gemini o przejrzenie i wyjaÅ›nienie bazy kodu.</p>
<p><strong>Monit:</strong> `PrzeglÄ…daj bieÅ¼Ä…cy katalog i opisz architekturÄ™ projektu.`</p>
<p>Gemini CLI zwrÃ³ci ustrukturyzowane podsumowanie wyjaÅ›niajÄ…ce architekturÄ™:
*   **Interfejs uÅ¼ytkownika:** Aplikacja Streamlit (`travel_ui.py`) zapewnia interfejs do interakcji.
*   **Orkiestracja:** `host_agent` dziaÅ‚a jako centralny koordynator.
*   **Wyspecjalizowani agenci:** `flight_agent`, `stay_agent`, `activities_agent` do wyszukiwania lotÃ³w, hoteli i atrakcji.
*   **Komunikacja:** Agenci komunikujÄ… siÄ™ ze sobÄ… za poÅ›rednictwem interfejsu API RESTful FastAPI.
*   **WspÃ³lne komponenty:** `shared/schemas.py` definiuje wspÃ³lne struktury danych.

PomoÅ¼e to w nawigacji bez rÄ™cznego czytania kaÅ¼dego pliku.

<h4>Analiza i naprawa problemu GitHub</h4>
<p>Przyjrzyjmy siÄ™ kilku otwartym problemom z repozytorium GitHub.</p>
<p><strong>Monit:</strong> `Oto problem GitHub: [@search https://github.com/AashiDutt/Google-Agent-Development-Kit-Demo/issues/1]. Przeanalizuj bazÄ™ kodu i zaproponuj 3-etapowy plan naprawy. KtÃ³re pliki/funkcje naleÅ¼y zmieniÄ‡?`</p>
<p>Gemini CLI zbadaÅ‚ problem:
*   KorzystajÄ…c z funkcji `@search`, pobraÅ‚ dane z GitHuba.
*   ZidentyfikowaÅ‚ gÅ‚Ã³wnÄ… przyczynÄ™ jako bÅ‚Ä…d serializacji JSON (w tym przypadku asynchroniczna funkcja `create_session()` nie zostaÅ‚a wywoÅ‚ana z `await`).
*   ZaproponowaÅ‚ zmiany i obsÅ‚ugÄ™ odpowiedzi w wielu plikach.

NastÄ™pnie CLI czeka na dane wejÅ›ciowe uÅ¼ytkownika w celu oceny zmian. JeÅ›li uÅ¼ytkownik siÄ™ zgodzi, zastosuje sugerowane zmiany.

<h4>Implementacja i testowanie poprawki</h4>
<p>Teraz zaimplementujmy i przetestujmy poprawki sugerowane przez Gemini.

**Monit:** `Napisz test jednostkowy dla tej zmiany w pytest w pliku test_shared.py.`</p>
<p>Gemini CLI:
*   WstawiÅ‚ `json.dumps()` przed wysÅ‚aniem Å‚adunku zadania.
*   UtworzyÅ‚ `test_agents.py`, aby dodaÄ‡ testy jednostkowe.
*   DodaÅ‚ nowy przypadek testowy, aby sprawdziÄ‡ schemat i przekazaÄ‡ zagnieÅ¼dÅ¼one wiadomoÅ›ci agentÃ³w.

<h4>Generowanie dokumentacji</h4>
<p>Teraz, gdy poprawki zostaÅ‚y zastosowane, podsumujmy zmiany i zapiszmy je w Markdown w pliku `.txt`.

**Monit:** `Napisz podsumowanie Markdown bÅ‚Ä™du, poprawki i pokrycia testÃ³w. Sformatuj je jako wpis w dzienniku zmian pod wersjÄ… "v0.2.0".`</p>
<p>NastÄ™pnie, aby zapisaÄ‡ podsumowanie w dokumencie, uÅ¼yÅ‚em nastÄ™pujÄ…cego monitu:

**Monit:** `Zapisz to podsumowanie w pliku .txt i nazwij je summary.txt`</p>
<p>Gemini CLI uÅ¼ywa narzÄ™dzia `WriteFile` do zapisania pliku `summary.txt` w katalogu projektu.

<h4>Generowanie schematu blokowego za pomocÄ… MCP</h4>
<p>Ta sekcja rozszerza poprzednie eksperymenty, w ktÃ³rych badam, w jaki sposÃ³b Gemini CLI wykorzystuje **Model Context Protocol (MCP)** do utrzymywania podsumowaÅ„ na poziomie plikÃ³w i historii zadaÅ„ miÄ™dzy monitami. Daje to Gemini "pamiÄ™Ä‡ roboczÄ…" w ramach sesji.

**Monit:** `Wygeneruj schemat blokowy, ktÃ³ry pokazuje, jak agenci komunikujÄ… siÄ™ za poÅ›rednictwem A2A (agent-to-agent) i jak main.py zarzÄ…dza systemem. PodkreÅ›l, gdzie wystÄ…piÅ‚ problem i jak zostaÅ‚ naprawiony.`</p>
<p>Ta wizualizacja byÅ‚a moÅ¼liwa dziÄ™ki trwaÅ‚ej pamiÄ™ci Gemini, ktÃ³ra zachowaÅ‚a peÅ‚ny kontekst naszej poprzedniej poprawki bÅ‚Ä™du i struktury agenta bez koniecznoÅ›ci ponownego Å‚adowania plikÃ³w.

<h3>DostÄ™pne narzÄ™dzia Gemini CLI</h3>
<p>WywoÅ‚anie polecenia `/tools` w Gemini CLI wyÅ›wietli listÄ™ dostÄ™pnych narzÄ™dzi, ktÃ³re moÅ¼na wykorzystaÄ‡ do wykonywania rÃ³Å¼nych zadaÅ„, takich jak edycja kodu, generowanie testÃ³w, tworzenie dokumentacji i wiele innych.</p>
<p><img src="assets/gemini_cli_1/tools.png" alt="Tools"></p>
<p><strong>ReadFolder (ls)</strong><br>
WyÅ›wietla listÄ™ plikÃ³w i folderÃ³w w katalogu â€” podobnie jak polecenie `ls` w wierszu poleceÅ„.</p>
<p><strong>ReadFile (read-file)</strong><br>
Odczytuje peÅ‚nÄ… zawartoÅ›Ä‡ pojedynczego pliku, przydatne do tworzenia podsumowaÅ„ lub analizy.</p>
<p><strong>ReadManyFiles (read-many-files)</strong><br>
Odczytuje wiele plikÃ³w jednoczeÅ›nie, zazwyczaj wedÅ‚ug wzorca (np. wszystkie pliki `.js`).</p>
<p><strong>FindFiles (glob)</strong><br>
Wyszukuje pliki wedÅ‚ug wzorca (np. znajdÅº wszystkie pliki `config.json` w swoim projekcie).

**SearchText (grep)**<br>
Wyszukuje tekst w plikach, na przykÅ‚ad, aby znaleÅºÄ‡ wszystkie komentarze `TODO`.</p>
<p><strong>Edit (edit)</strong><br>
Stosuje zmiany w kodzie za pomocÄ… `diff`. Gemini wyÅ›wietla podglÄ…d edycji i prosi o potwierdzenie przed ich zastosowaniem.</p>
<p><strong>WriteFile (write-file)</strong><br>
Tworzy nowe pliki (np. `README.md`) z treÅ›ciÄ… dostarczonÄ… przez uÅ¼ytkownika.</p>
<p><strong>Shell (shell)</strong><br>
Wykonuje polecenia bezpoÅ›rednio w terminalu, jeÅ›li poprzedzisz je prefiksem `!` (np. `!npm test`).</p>
<p><strong>WebFetch (web-fetch)</strong><br>
Pobiera zawartoÅ›Ä‡ z sieci (HTML lub JSON), umoÅ¼liwiajÄ…c Gemini analizowanie danych zewnÄ™trznych.</p>
<p><strong>GoogleSearch (web-search)</strong><br>
Wykonuje wyszukiwanie w Google, aby oprzeÄ‡ odpowiedzi na rzeczywistych informacjach (np. aby znaleÅºÄ‡ wyjaÅ›nienie bÅ‚Ä™du).

**Save Memory (memoryTool)**<br>
Zapisuje fakty lub preferencje podczas sesji (np. "WolÄ™ async/await"), aby poprawiÄ‡ spÃ³jnoÅ›Ä‡ i koherencjÄ™ odpowiedzi.</p>


<h3>Zaawansowane funkcje</h3>

MoÅ¼esz dodawaÄ‡ specjalne instrukcje dla AI dla konkretnego projektu,
TworzÄ…c plik `GEMINI.md` w katalogu gÅ‚Ã³wnym swojego projektu.
WewnÄ…trz tego pliku moÅ¼esz zdefiniowaÄ‡ zasady projektu,
style kodu i narzÄ™dzia, ktÃ³rych agent powinien uÅ¼ywaÄ‡. Zapewnia to, Å¼e wygenerowany kod jest zgodny ze standardami Twojego projektu.</p>
<p><a href="https://github.com/hypo69/hypotez/blob/master/src/endpoints/hypo69/code_assistant/instructions/CODE_RULES.EN.MD">PrzykÅ‚ad instrukcji systemowej</a></p>
<h3>Integracja Google CLI z MCP</h3>
<p>W przypadku wiÄ™kszoÅ›ci codziennych zadaÅ„ wbudowane narzÄ™dzia bÄ™dÄ… wystarczajÄ…ce. Ale co, jeÅ›li chcesz, aby Gemini CLI robiÅ‚o coÅ› wysoce wyspecjalizowanego, na przykÅ‚ad wchodziÅ‚o w interakcje z okreÅ›lonymi interfejsami API lub uÅ¼ywaÅ‚o wyspecjalizowanego modelu (powiedzmy, generatora obrazÃ³w lub narzÄ™dzia do analizy bezpieczeÅ„stwa)? WÅ‚aÅ›nie tutaj wkracza MCP (Model Context Protocol).</p>
<p>Zasadniczo MCP to otwarty standard, ktÃ³ry pozwala programistom dodawaÄ‡ nowe narzÄ™dzia i moÅ¼liwoÅ›ci do AI poprzez uruchomienie serwera, z ktÃ³rym CLI moÅ¼e siÄ™ komunikowaÄ‡. W Gemini CLI moÅ¼esz skonfigurowaÄ‡ "serwery MCP" w pliku ustawieÅ„ JSON, a CLI bÄ™dzie traktowaÄ‡ je jako dodatkowe narzÄ™dzia, ktÃ³rych moÅ¼e uÅ¼ywaÄ‡.</p>
<h4>Jak skonfigurowaÄ‡ serwer MCP w Google CLI</h4>
<p>Jako przykÅ‚ad pokaÅ¼Ä™, jak skonfigurowaÄ‡ serwer MCP dla GitHuba w Gemini CLI.</p>
<p>W folderze projektu utwÃ³rz folder za pomocÄ… polecenia:</p>
<pre class="line-numbers"><code class="language-bash">mkdir -p .gemini && touch .gemini/settings.json
</code></pre>
<p>WypeÅ‚nij plik tym kodem:
```json
{
  "mcpServers": {
    "github": {
      "command": "npx",
      "args": ["-y", "@modelcontextprotocol/server-github"],
      "env": { "GITHUB_PERSONAL_ACCESS_TOKEN": "[YOUR-TOKEN]" }
    }
  }
}
```
<p><a href="https://docs.github.com/en/authentication/keeping-your-account-and-data-secure/managing-your-personal-access-tokens#creating-a-personal-access-token-classic">instrukcje, jak uzyskaÄ‡ token</a><br>
NastÄ™pnie wpisz `/quit` w Gemini CLI, aby wyjÅ›Ä‡, a nastÄ™pnie otwÃ³rz go ponownie.
Zobaczysz, Å¼e serwer MCP GitHuba dziaÅ‚a i jest gotowy do uÅ¼ycia.</p>
<p><img src="assets/gemini_cli_1/mcp.png" alt="MCP"></p>
<p>Wpisz polecenie `/mcp`, a zobaczysz listÄ™ narzÄ™dzi GitHuba.</p>
<p><img src="assets/gemini_cli_1/mcp_commands.png" alt="Mcp Commands"></p>